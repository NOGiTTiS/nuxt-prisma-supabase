{"file":"register-B0ErwnUH.js","mappings":";;;;;;;;;;;;;;;;;;;;;;AAIe,cAAU;AAEnB,UAAA,QAAQ,IAAI,EAAE;AACd,UAAA,WAAW,IAAI,EAAE;AAEjB,UAAA,UAAU,IAAI,EAAE;AAChB,UAAA,SAAS,IAAI,KAAK;AAEP,sBAAkB;AAwC3B,YAAA;AAAA,MACN,OAAO;AAAA,MACP,MAAM;AAAA,QACJ;AAAA,UACE,MAAM;AAAA,UACN,SAAS;AAAA,QACX;AAAA,QACA;AAAA,UACE,MAAM;AAAA,UACN,SAAS;AAAA,QAAA;AAAA,MACX;AAAA,IACF,CACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/register.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { useSupabaseClient } from \"#imports\";\r\n\r\n// ตัวแปรสำหรับเรียกใช้งาน router ระหว่างหน้าเว็บ\r\nconst router = useRouter();\r\n// สร้างตัวแปรสำหรับเก็บค่า email และ password ที่ผู้ใช้กรอกเข้ามา\r\nconst email = ref(\"\");\r\nconst password = ref(\"\");\r\n// สร้างตัวแปรสำหรับเก็บข้อความแสดงผล\r\nconst message = ref(\"\");\r\nconst status = ref(false);\r\n// สร้างตัวแปรสำหรับเรียกใช้งาน Supabase Client\r\nconst supabase = useSupabaseClient();\r\n// ฟังก์ชันสำหรับการสมัครสมาชิก\r\nconst handleRegister = async () => {\r\n  // Valideate ข้อมูลที่ผู้ใช้กรอกเข้ามา แบบ if else บ้านๆ\r\n  if (!email.value || !password.value) {\r\n    message.value = \"Please enter both email and password.\";\r\n    status.value = false;\r\n    return;\r\n  }\r\n  try {\r\n    // ใช้ supabase.auth.signUp() เพื่อสมัครสมาชิก\r\n    const { error } = await supabase.auth.signUp({\r\n      email: email.value,\r\n      password: password.value,\r\n    });\r\n    if (error) throw error;\r\n    message.value =\r\n      \"Registration successful! Please check your email for a confirmation link.\";\r\n    status.value = true;\r\n\r\n    // หน่วงเวลา 3 วินาที แล้วเปลี่ยนหน้าเว็บไปยังหน้า login\r\n    await new Promise((resolve) => setTimeout(resolve, 3000));\r\n    router.push(\"/login\");\r\n\r\n  } catch (error: unknown) {\r\n    if (error instanceof Error) {\r\n      message.value = error.message;\r\n      status.value = false;\r\n    } else {\r\n      message.value = \"An unknown error occurred\";\r\n      status.value = false;\r\n    }\r\n  }\r\n};\r\n\r\n// ไว้กำหนด Meta ของหน้าเว็บ เช่น title, description, keyword รวมทั้ง layout ที่ใช้\r\ndefinePageMeta({\r\n  layout: \"auth\",\r\n});\r\n\r\nuseHead({\r\n  title: \"Register\",\r\n  meta: [\r\n    {\r\n      name: \"keywords\",\r\n      content: \"Register, Nuxt 3, Backend\",\r\n    },\r\n    {\r\n      name: \"Description\",\r\n      content: \"Register Nuxt 3,  IT Genius Engineering\",\r\n    },\r\n  ],\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    class=\"bg-base-200 h-[calc(100vh-50px)] flex items-center justify-center\">\r\n    <div class=\"card lg:card-side bg-base-100 shadow-xl max-w-4xl w-full\">\r\n      <figure class=\"lg:w-1/2\">\r\n        <img\r\n          src=\"https://www.apla.world/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fimg_background.d376e1cc.png&w=3840&q=75\"\r\n          alt=\"Random image\"\r\n          class=\"object-cover w-full h-full\" />\r\n      </figure>\r\n      <div class=\"card-body lg:w-1/2\">\r\n        <h2 class=\"card-title text-2xl font-bold mb-6\">Register</h2>\r\n\r\n        <p\r\n          v-if=\"message\"\r\n          :class=\"status ? 'bg-success' : 'bg-error'\"\r\n          class=\"p-3 rounded-lg text-white\">\r\n          {{ message }}\r\n        </p>\r\n\r\n        <form @submit.prevent=\"handleRegister\">\r\n          <div class=\"form-control\">\r\n            <label class=\"label\">\r\n              <span class=\"label-text\">Email</span>\r\n            </label>\r\n            <label class=\"input input-bordered flex items-center gap-2\">\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"currentColor\"\r\n                class=\"w-4 h-4 opacity-70\">\r\n                <path\r\n                  d=\"M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z\" />\r\n                <path\r\n                  d=\"M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z\" />\r\n              </svg>\r\n              <input\r\n                v-model=\"email\"\r\n                type=\"email\"\r\n                class=\"grow\"\r\n                placeholder=\"email@example.com\" />\r\n            </label>\r\n          </div>\r\n          <div class=\"form-control mt-4\">\r\n            <label class=\"label\">\r\n              <span class=\"label-text\">Password</span>\r\n            </label>\r\n            <label class=\"input input-bordered flex items-center gap-2\">\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 16 16\"\r\n                fill=\"currentColor\"\r\n                class=\"w-4 h-4 opacity-70\">\r\n                <path\r\n                  fill-rule=\"evenodd\"\r\n                  d=\"M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z\"\r\n                  clip-rule=\"evenodd\" />\r\n              </svg>\r\n              <input\r\n                v-model=\"password\"\r\n                type=\"password\"\r\n                class=\"grow\"\r\n                placeholder=\"Enter password\" />\r\n            </label>\r\n          </div>\r\n          <div class=\"form-control mt-6\">\r\n            <button type=\"submit\" class=\"btn btn-primary\">Register</button>\r\n          </div>\r\n        </form>\r\n        <div class=\"divider\">OR</div>\r\n        <div class=\"text-center\">\r\n          <p>Already have an account?</p>\r\n          <NuxtLink to=\"/login\" class=\"link link-primary\">Sign in</NuxtLink>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped></style>\r\n"],"version":3}